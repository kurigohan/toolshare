{% extends "base.html" %}
{% load staticfiles %}
{% block title %}Tool - {{ tool.name }}{% endblock %} 

{% block content %} 
{{block.super}}
    <h2 class="page-header">Tool <small>{{ tool.name }}</small></h2>
        <div class="row">
            <div class="col-sm-6 text-right">
                <img class="img-rounded tool-img" alt="170x170" src="{% static 'img/toolplaceholder.png' %}">
            </div>
                

                <!--
                <form class="navbar-form navbar-right" role="search">
                  <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search">
                  </div>
                  <button type="submit" class="btn btn-default">Submit</button>
                  <button type="submit" class="btn btn-default">Clear</button>
                </form>-->
              

         
            <div class="col-sm-6 text-left">
              <table class="table no-border table-condensed detail-table">
                <tbody>
                  <tr>
                    <td class="text-muted label-col">Name:</td>
                    <td>{{ tool.name }}</td>
                  </tr>
                  <tr>
                    <td class="text-muted">Shed:</td>
                    <td><a href="{% url 'shed_detail' shed_id=tool.shed.id %}">{{ tool.shed.name }}</a></td>
                  </tr>
                  <tr>
                    <td class="text-muted">Owner:</td>
                    <td><a href="{% url 'profiles_profile_detail' username=tool.owner.username %}">
                      {{tool.owner.username}}
                    </a></td>
                  </tr>

                  <tr>
                    <td class="text-muted">Borrower:</td>
                    <td>
                    {% if tool.borrower %}
                    <a href="{% url 'profiles_profile_detail' username=tool.borrower.username %}">{{ tool.borrower.username }}
                    </a>
                    {% else %}
                    None
                    {% endif %}</td>
                  </tr>
                  <tr>
                    <td class="text-muted">Category:</td>
                    <td>{{ tool.category }}</td>
                  </tr>
		      <tr>
                    <td class="text-muted">Description:</td>
                    <td>{{ tool.description }}</td>
                  </tr>
                  {% if tool.date_borrowed %}
                  <tr>
                    <td class="text-muted">Date Borrowed:</td>
                    <td>{{ tool.date_borrowed }}</td>
                  </tr>
                  {% endif %}
                </tbody>
              </table>

               <!-- Buttons -->
                    {% if not tool.borrower and user != tool.owner and tool.shed.postal_code == user.profile.postal_code %}
                    <a class="btn btn-primary" href="{%url 'borrow_tool' tool_id=tool.id %}"><strong>Borrow</strong></a>
                    {% elif user != tool.owner and user == tool.borrower %}
                    <a class="btn btn-primary" href="{%url 'return_tool' tool_id=tool.id %}"><strong>Return</strong></a>
                    {% endif %}

                   {% if user == tool.owner %}
                      <a class="btn btn-primary" href="{% url 'edit_tool' tool_id=tool.id %}"><strong>Edit</strong></a>
                  
                      {% if tool.is_available %}
                      
                        <a class="btn btn-primary confirm-btn" href="{% url 'delete_tool' tool_id=tool.id %}" >
                          <strong>Delete</strong></a>
                      
                      {% endif %}
                    {% endif %}
                  {% if error_msg %}
                    {{error_msg}}
                  {% endif %}
            </div>
          </div>

{% endblock %}

{% block js_ready %}
        $(".confirm-btn").click(function(e){
          e.preventDefault();
          bootbox.confirm("Are you sure?", function(result){
            if(result){
              window.location.href = "{% url 'delete_tool' tool_id=tool.id %}";
            }
          });
        });
{% endblock %}